
# Quelyd — Платформа пользовательских квестов

Quelyd — это веб-платформа, позволяющая пользователям создавать, выполнять и управлять собственными квестами. Проект реализован в виде серверной части интернет-ресурса с поддержкой REST API, аутентификации, модерации контента и ролевой системы доступа.

## Функциональные возможности

### Для пользователей
- **Регистрация и аутентификация** (email/пароль)
- **Создание квестов** с указанием типа (индивидуальный, коллективный, с лимитом времени), награды, описания и дедлайна
- **Просмотр списка доступных квестов**
- **Просмотр и редактирование собственных квестов**
- **Публикация квеста** (после создания он находится в черновиках)
- **Удаление собственных квестов**

### Для администраторов
- **Модерация квестов**: просмотр списка неодобренных квестов, их одобрение или удаление

### Для разработчиков (через API)
- **Полный доступ к функционалу сайта** через REST API с аутентификацией по токену
- **Создание, просмотр, редактирование, публикация и удаление квестов**
- **Аутентификация (login/register)** через API

## Технологии

- **Язык программирования**: PHP 8.2
- **База данных**: MySQL 8.0
- **Библиотека работы с БД**: [krugozor/database](https://github.com/Vasiliy-Makogon/Database)
- **Архитектура**: самописный MVC-фреймворк (Model-View-Controller)
- **Контейнеризация**: Docker (Docker Compose)
- **Тестирование**: PHPUnit

## Установка и запуск

### Требования
- Docker
- Docker Compose

### Шаги

1. Клонируйте репозиторий:
   ```bash
   git clone <your-repo-url>
   cd Quelyd
   ```

2. Установите зависимости:
   ```bash
   composer install
   ```

3. Запустите проект с помощью Docker Compose:
   ```bash
   docker-compose up --build
   ```

4. Откройте в браузере: `http://localhost:8080`

### Учетная запись администратора
- **Email**: `admin@quelyd.local`
- **Пароль**: `password`

## Использование сайта

### Регистрация и вход
1. Перейдите на страницу `/auth/register` для регистрации.
2. Или на `/auth/login` для входа, если уже зарегистрированы.

### Создание квеста
1. После входа в систему перейдите на `/quests/create`.
2. Заполните форму и нажмите "Создать квест". Квест появится в ваших черновиках.
3. Чтобы опубликовать квест, перейдите в "Мои квесты" (`/quests/my`) и нажмите "Опубликовать".

### Модерация (для администраторов)
1. Войдите как администратор.
2. Перейдите в раздел "Модерация" в меню.
3. Здесь вы увидите список квестов, ожидающих одобрения. Вы можете их одобрить или удалить.

## Использование API

### Аутентификация
Большинство API-методов требуют аутентификации. Для этого:
1. Выполните `POST /api/auth/login` или `POST /api/auth/register`.
2. Получите токен из ответа.
3. Передавайте токен в заголовке `Authorization: Bearer <token>` для защищенных запросов.

### Примеры API-запросов

#### Получить список квестов
```http
GET /api/quests
Content-Type: application/json
Authorization: Bearer <your_token>
```

#### Создать квест
```http
POST /api/quests/create
Content-Type: application/json
Authorization: Bearer <your_token>

{
  "title": "Пример квеста",
  "description": "Описание квеста",
  "type": "individual",
  "reward": 50
}
```

#### Одобрить квест (админ)
```http
POST /api/admin/approve/123
Authorization: Bearer <admin_token>
```

#### Получить список квестов на модерацию (админ)
```http
GET /api/admin/moderate
Authorization: Bearer <admin_token>
```

## Структура проекта

- `application/` — основной код приложения (контроллеры, модели, сервисы, репозитории)
- `public/` — статические файлы и точка входа `index.php`
- `tests/` — юнит- и интеграционные тесты
- `docker/` — конфигурация Docker
- `init.sql` — скрипт инициализации базы данных
- `docker-compose.yml` — конфигурация запуска сервисов

## Тестирование

Для запуска тестов выполните:
```bash
vendor/bin/phpunit
```
```